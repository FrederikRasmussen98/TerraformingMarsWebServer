name: Send Email on Update

on:
  workflow_dispatch:   # Gør det muligt at køre manuelt
  push:
    branches:
      - main

jobs:
  send_email:
    runs-on: ubuntu-latest

    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Send email notification
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: smtp.gmail.com
          server_port: 587
          secure: false

          username: ${{ secrets.SMTP_USER }}
          password: ${{ secrets.SMTP_PASS }}

          subject: "GitHub Repo Update - ${{ github.repository }}"
          to: "frederik.r.t.r@gmail.com, aske-alstrup@hotmail.com, askebest@gmail.com, Malthe@Raschke.dk"
          from: "${{ secrets.SMTP_USER }}"
          body: |
            Repoet er blevet opdateret!

            Commit: ${{ github.sha }}
            Bruger: ${{ github.actor }}
            Besked: ${{ github.event.head_commit.message }}
